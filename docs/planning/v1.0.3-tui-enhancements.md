# token-audit v1.0.3 â€” Rich TUI Enhancements

**Date**: December 26, 2025
**Type**: Minor Release (backward compatible)
**Branch**: `claude/token-audit-version-check-AAzau`

---

## Executive Summary

Gap analysis of the Rich TUI (`token-audit ui`) revealed two critical issues:

1. **No aggregation views** â€” Users must exit to CLI for "What was my usage this week?"
2. **No session lifecycle management** â€” Users must exit to CLI to start tracking or delete sessions

This plan transforms the TUI into a **fully self-contained interface** where users can:
- Start new tracking sessions
- View live and historical data
- Analyze trends and patterns
- Manage sessions (pin, delete)
- Export data in multiple formats

All without ever leaving the TUI.

**Design Philosophy**: Every view prioritizes **human readability** â€” clean tables, logical sections, scannable layouts, and consistent visual hierarchy.

---

## Goals

1. **Self-Contained Workflow** â€” Never need to exit TUI for daily tasks
2. **Human-Readable Reports** â€” Tables, sections, clear hierarchy
3. **Scannable Layouts** â€” Key metrics visible at a glance
4. **Consistent UX** â€” Predictable keybindings and navigation
5. **Fast Feedback** â€” Sub-200ms for all views

---

## Dependencies on v1.0.2

> **Important**: This plan assumes v1.0.2 (MCP Server Enhancements) is implemented first.

v1.0.2 creates shared infrastructure that this release reuses:

### From `storage.py`
- `list_sessions_paginated()` â€” Pagination with offset/limit/sort
- `delete_session()` â€” Safe session deletion with file locking

### From `preferences.py`
- `add_pinned_server()` â€” Add server to pinned list
- `remove_pinned_server()` â€” Remove server from pinned list
- `update_pinned_server()` â€” Update pinned server notes

### Concurrency Safety
v1.0.2 implements file locking and atomic writes for safe concurrent access.
TUI must:
- Use the same locking mechanisms when writing
- Detect external changes (mtime checks) and refresh
- Handle deleted files gracefully (show notification, don't crash)

### If Implementing Before v1.0.2
If v1.0.3 must be implemented first:
1. Create the shared helpers in Phase 1
2. Follow the concurrency patterns from v1.0.2 plan
3. Ensure v1.0.2 reuses these helpers (not duplicates)

---

## Current State (v1.0.1)

### TUI Limitations

| User Task | Current TUI | Requires CLI |
|-----------|-------------|--------------|
| Start tracking a session | âŒ | `collect --platform X` |
| View daily/weekly/monthly usage | âŒ | `daily`, `weekly`, `monthly` |
| See smell frequency trends | âŒ | `report --smells` |
| Delete old sessions | âŒ | `sessions delete` |
| Manage pinned servers | âŒ | `pin --add/--remove` |
| Export aggregated data | âŒ | `report --format csv` |

### Current Views (9) â€” All Session-Centric

The TUI only shows individual session data. No aggregation, no lifecycle management.

---

## Proposed Enhancements

### New Views (3)

| View | Key | Purpose |
|------|-----|---------|
| **Analytics** | `5` | Time-series aggregation (daily/weekly/monthly) |
| **Smell Trends** | `6` | Cross-session smell frequency analysis |
| **Pinned Servers** | `7` | Manage pinned MCP servers |

### New Actions (3)

| Action | Key | Purpose |
|--------|-----|---------|
| **Start Tracking** | `n` | Begin new collection session from TUI |
| **Delete Session** | `D` | Remove selected session(s) |
| **Quick Export** | `e`/`j`/`a` | Export current view data |

### Enhanced Views (2)

| View | Enhancement |
|------|-------------|
| **Dashboard** | Trend cards, sparklines, smell frequency % |
| **Recommendations** | Trend-based insights, actionable suggestions |

---

## UX Design Principles

### 1. Visual Hierarchy

Every view follows a consistent structure:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VIEW TITLE                                    Context/Filters   â”‚ â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ PRIMARY CONTENT AREA                                            â”‚ â† Main focus
â”‚ (Tables, charts, key metrics)                                   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DETAIL/CONTEXT PANEL                                            â”‚ â† Secondary
â”‚ (Selected item details, breakdowns)                             â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [key] Action  [key] Action  [key] Action           [q] Quit    â”‚ â† Actions
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Table Design Standards

All tables follow these conventions:

```
â”‚ Column Name    â”‚ Right-Align â”‚ Left-Align  â”‚ Indicator â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Primary ID     â”‚   Numbers   â”‚ Text/Names  â”‚ â–²â–¼â†’ â—â—‹    â”‚
â”‚ Secondary...   â”‚    1,234    â”‚ description â”‚ â–² +15%    â”‚
```

- **Numbers**: Right-aligned, with thousand separators
- **Text**: Left-aligned
- **Dates**: Consistent format (`Dec 26` or `2025-12-26`)
- **Money**: Right-aligned, 2 decimal places (`$45.23`)
- **Percentages**: Right-aligned with `%` suffix
- **Trends**: Colored indicators (â–² green, â–¼ red, â†’ gray)

### 3. Information Density

| Context | Density | Example |
|---------|---------|---------|
| Dashboard cards | High | Key metric + trend in 2 lines |
| List views | Medium | 6-8 columns, scrollable |
| Detail views | Low | Full breakdown with whitespace |

### 4. Color Semantics

| Color | Meaning | Usage |
|-------|---------|-------|
| Green | Positive/Good | Cost down, cache up, success |
| Red | Negative/Warning | Cost up, errors, high severity |
| Yellow | Caution | Medium severity, approaching limit |
| Blue | Information | Links, selections, highlights |
| Gray | Neutral/Muted | Secondary info, disabled |

---

## Detailed Specifications

### New Action 1: Start Tracking (`n`)

**Purpose**: Begin a new tracking session without leaving TUI.

**Trigger**: Press `n` from any view (except during active tracking)

**Modal UI**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Start New Tracking Session                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Select Platform:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [1] â— Claude Code     Most accurate (native tokens)     â”‚   â”‚
â”‚  â”‚ [2] â—‹ Codex CLI       High accuracy (tiktoken)          â”‚   â”‚
â”‚  â”‚ [3] â—‹ Gemini CLI      Good accuracy (95%+)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  Options:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [x] Track from session start (include prior messages)   â”‚   â”‚
â”‚  â”‚ [ ] Pin specific servers: _______________               â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ Project: token-audit (auto-detected from git)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Enter] Start Tracking    [Esc] Cancel                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Behavior**:
1. Modal appears over current view
2. Platform selection via number keys or arrow keys
3. Options toggled with `x` or `Space`
4. Enter starts tracking â†’ switches to Live view
5. Esc cancels and returns to previous view

**Live Tracking View** (while collecting):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ LIVE TRACKING                        Session: abc-123-def   â”‚
â”‚    Claude Code Â· token-audit Â· claude-sonnet-4                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Duration        Token Usage              Cost                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  00:12:34        Input:      45,231       Session:    $3.12    â”‚
â”‚                  Output:     12,456       Rate:    $0.25/min   â”‚
â”‚                  Cache:       8,901                             â”‚
â”‚                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚                  Total:      66,588                             â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MCP Servers                              Efficiency            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  mcp__jina (3 tools, 12 calls)            Cache Hit:   42%     â”‚
â”‚  mcp__brave (2 tools, 8 calls)            Token Rate: 5.4K/min â”‚
â”‚  mcp__backlog (4 tools, 5 calls)          Call Rate:    2/min  â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Recent Activity                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  12:34:01  mcp__jina__read_url         2,345 tokens            â”‚
â”‚  12:33:58  Read                          456 tokens            â”‚
â”‚  12:33:45  mcp__brave__web_search      1,234 tokens            â”‚
â”‚  12:33:30  Bash                          123 tokens            â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Smells Detected: 2                                             â”‚
â”‚  â— HIGH_VARIANCE (mcp__jina__read_url)                         â”‚
â”‚  â— CHATTY (mcp__backlog)                                        â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [s] Stop Tracking  [p] Pause  [a] Export for AI  [q] Quit      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Stop Tracking**:
- `s` stops tracking and shows session summary
- `q` stops tracking and exits TUI entirely
- Session auto-saves on stop

---

### New Action 2: Delete Session (`D`)

**Purpose**: Remove selected session(s) from storage.

**Trigger**: Press `D` (shift+d) from Sessions List with session selected

**Confirmation Modal**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Delete Session                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Are you sure you want to delete this session?                  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Session:   abc-123-def                                  â”‚   â”‚
â”‚  â”‚ Date:      Dec 26, 2025 at 10:23 AM                     â”‚   â”‚
â”‚  â”‚ Platform:  Claude Code                                  â”‚   â”‚
â”‚  â”‚ Project:   token-audit                                  â”‚   â”‚
â”‚  â”‚ Tokens:    125,432                                      â”‚   â”‚
â”‚  â”‚ Cost:      $8.50                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸  This action cannot be undone.                             â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [y] Yes, Delete    [n] No, Cancel    [Esc] Cancel              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Bulk Delete** (future enhancement):
- Select multiple sessions with `Space`
- `D` shows count: "Delete 5 sessions?"

---

### New View 1: Analytics (`5`)

**Purpose**: Time-series aggregation with daily/weekly/monthly views.

**Layout**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analytics                              [d]aily [w]eekly [m]onthlyâ”‚
â”‚ Period: Dec 20-26, 2025 (7 days)                    All Platformsâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  USAGE BY DAY                                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  Date       â”‚ Sessions â”‚   Tokens â”‚    Cost â”‚ Trend  â”‚ Smells  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Dec 26     â”‚        5 â”‚  125,432 â”‚   $8.50 â”‚ â–² +15% â”‚       2 â”‚
â”‚  Dec 25     â”‚        4 â”‚   89,234 â”‚   $6.12 â”‚        â”‚       1 â”‚
â”‚  Dec 24     â”‚        6 â”‚  112,890 â”‚   $7.80 â”‚        â”‚       3 â”‚
â”‚  Dec 23     â”‚        2 â”‚   45,678 â”‚   $3.20 â”‚ â–¼ -40% â”‚       0 â”‚
â”‚  Dec 22     â”‚        7 â”‚  128,901 â”‚   $8.90 â”‚        â”‚       4 â”‚
â”‚  Dec 21     â”‚        4 â”‚   78,234 â”‚   $5.40 â”‚        â”‚       1 â”‚
â”‚  Dec 20     â”‚        3 â”‚   67,890 â”‚   $4.70 â”‚        â”‚       2 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  TOTAL      â”‚       31 â”‚  648,259 â”‚  $44.62 â”‚ â–² +12% â”‚      13 â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PERIOD SUMMARY                       â”‚ MODEL BREAKDOWN          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Total Sessions:           31         â”‚                          â”‚
â”‚  Total Tokens:        648,259         â”‚ claude-sonnet-4    62%   â”‚
â”‚  Total Cost:           $44.62         â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–’  $27.67  â”‚
â”‚                                       â”‚                          â”‚
â”‚  Average per Day:                     â”‚ claude-opus-4      31%   â”‚
â”‚    Sessions:              4.4         â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–’â–’â–’â–’â–’â–’â–’  $13.83  â”‚
â”‚    Tokens:             92,608         â”‚                          â”‚
â”‚    Cost:                $6.37         â”‚ gpt-4o              7%   â”‚
â”‚                                       â”‚ â–ˆâ–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’   $3.12  â”‚
â”‚  vs Previous 7 Days:                  â”‚                          â”‚
â”‚    Tokens: â–² +12% (578K â†’ 648K)       â”‚                          â”‚
â”‚    Cost:   â–² +8%  ($41.30 â†’ $44.62)   â”‚                          â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Enter] Drill into day  [b] Breakdown  [g] Group by project     â”‚
â”‚ [e] Export CSV  [j] JSON  [r] Date range  [q] Back              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Weekly View** (press `w`):
```
â”‚  Week Starting â”‚ Sessions â”‚   Tokens â”‚    Cost â”‚ Trend  â”‚ Avg/Day â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Dec 23        â”‚       18 â”‚  382,135 â”‚  $26.52 â”‚ â–² +8%  â”‚   $3.79 â”‚
â”‚  Dec 16        â”‚       22 â”‚  354,012 â”‚  $24.56 â”‚        â”‚   $3.51 â”‚
â”‚  Dec 9         â”‚       19 â”‚  298,456 â”‚  $20.72 â”‚ â–¼ -12% â”‚   $2.96 â”‚
â”‚  Dec 2         â”‚       25 â”‚  412,890 â”‚  $28.65 â”‚        â”‚   $4.09 â”‚
```

**Monthly View** (press `m`):
```
â”‚  Month    â”‚ Sessions â”‚    Tokens â”‚     Cost â”‚ Trend  â”‚ Avg/Day â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Dec 2025 â”‚       84 â”‚ 1,447,493 â”‚  $100.45 â”‚ â–² +5%  â”‚   $3.24 â”‚
â”‚  Nov 2025 â”‚       91 â”‚ 1,378,234 â”‚   $95.67 â”‚        â”‚   $3.19 â”‚
â”‚  Oct 2025 â”‚       78 â”‚ 1,156,789 â”‚   $80.34 â”‚ â–¼ -8%  â”‚   $2.59 â”‚
```

**Project Grouping** (press `g`):
```
â”‚  Project          â”‚ Sessions â”‚   Tokens â”‚    Cost â”‚ Trend  â”‚ Share  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€ â”‚
â”‚  token-audit      â”‚       18 â”‚  312,456 â”‚  $21.50 â”‚ â–² +12% â”‚    48% â”‚
â”‚  my-saas-app      â”‚       12 â”‚  198,234 â”‚  $13.80 â”‚ â–¼ -5%  â”‚    31% â”‚
â”‚  personal-blog    â”‚        8 â”‚   89,123 â”‚   $6.20 â”‚ stable â”‚    14% â”‚
â”‚  experiments      â”‚        3 â”‚   48,446 â”‚   $3.12 â”‚ NEW    â”‚     7% â”‚
```

---

### New View 2: Smell Trends (`6`)

**Purpose**: Cross-session smell pattern analysis with frequency and trends.

**Layout**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Smell Trends                                      Last 30 Days  â”‚
â”‚ 43 sessions analyzed Â· 13 smells detected                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  SMELL PATTERNS BY FREQUENCY                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  Pattern              â”‚ Frequency â”‚ Sessions â”‚ Severity â”‚ Trend â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€ â”‚
â”‚â–¸ HIGH_VARIANCE        â”‚      42%  â”‚   18/43  â”‚ â—â—â—‹ Med  â”‚ â–² +15%â”‚
â”‚  CHATTY               â”‚      35%  â”‚   15/43  â”‚ â—â—â—‹ Med  â”‚ â–¼ -8% â”‚
â”‚  LOW_CACHE_HIT        â”‚      28%  â”‚   12/43  â”‚ â—â—‹â—‹ Low  â”‚ â†’ 0%  â”‚
â”‚  TOP_CONSUMER         â”‚      23%  â”‚   10/43  â”‚ â—â—â—‹ Med  â”‚ â–² +20%â”‚
â”‚  REDUNDANT_CALLS      â”‚      14%  â”‚    6/43  â”‚ â—â—â— High â”‚ NEW   â”‚
â”‚  EXPENSIVE_FAILURES   â”‚       9%  â”‚    4/43  â”‚ â—â—â— High â”‚ â†’ 0%  â”‚
â”‚  BURST_PATTERN        â”‚       7%  â”‚    3/43  â”‚ â—â—â—‹ Med  â”‚ â–¼ -50%â”‚
â”‚  LARGE_PAYLOAD        â”‚       5%  â”‚    2/43  â”‚ â—â—â—‹ Med  â”‚ â†’ 0%  â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SELECTED: HIGH_VARIANCE                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                 â”‚
â”‚  Description:                                                   â”‚
â”‚  Token counts vary wildly across calls of the same tool         â”‚
â”‚  (coefficient of variation > 50%)                               â”‚
â”‚                                                                 â”‚
â”‚  Impact:                                                        â”‚
â”‚  â€¢ Unpredictable session costs                                  â”‚
â”‚  â€¢ Possible inefficient query patterns                          â”‚
â”‚  â€¢ May indicate unbounded result sets                           â”‚
â”‚                                                                 â”‚
â”‚  Recommendation:                                                â”‚
â”‚  Review tools with high variance. Consider adding pagination,   â”‚
â”‚  result limits, or content filtering to reduce variability.     â”‚
â”‚                                                                 â”‚
â”‚  Top Affected Tools:                                            â”‚
â”‚  1. mcp__jina__read_url (12 occurrences, avg variance: 340%)    â”‚
â”‚  2. mcp__brave__web_search (8 occurrences, avg variance: 180%)  â”‚
â”‚  3. Read (5 occurrences, avg variance: 120%)                    â”‚
â”‚                                                                 â”‚
â”‚  Recent Sessions with this Smell:                               â”‚
â”‚  â€¢ abc-123 (Dec 26) Â· def-456 (Dec 25) Â· ghi-789 (Dec 24)      â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Enter] View affected sessions  [d] Change days  [e] Export    â”‚
â”‚ [â†‘â†“] Navigate  [q] Back                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Severity Indicators**:
- `â—â—â— High` â€” Red, requires immediate attention
- `â—â—â—‹ Med` â€” Yellow, should address soon
- `â—â—‹â—‹ Low` â€” Gray, informational

---

### New View 3: Pinned Servers (`7`)

**Purpose**: Manage MCP servers marked for focused analysis.

**Layout**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pinned Servers                                    3 servers     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  PINNED MCP SERVERS                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  Server              â”‚ Method     â”‚ Notes           â”‚ Usage     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚â–¸ mcp__jina           â”‚ Manual     â”‚ Primary search  â”‚ 156 calls â”‚
â”‚  mcp__backlog        â”‚ Manual     â”‚ Task tracking   â”‚  42 calls â”‚
â”‚  mcp__brave          â”‚ Auto (MD)  â”‚ â€”               â”‚  38 calls â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SELECTED: mcp__jina                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                 â”‚
â”‚  Detection Method: Manually pinned                              â”‚
â”‚  Notes: Primary search server for documentation                 â”‚
â”‚  Pinned: Dec 20, 2025                                           â”‚
â”‚                                                                 â”‚
â”‚  Usage (Last 7 Days):                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Tool                  â”‚ Calls â”‚  Tokens â”‚ Avg Tokens    â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚ read_url              â”‚    89 â”‚ 234,567 â”‚        2,636  â”‚   â”‚
â”‚  â”‚ search_web            â”‚    45 â”‚  78,901 â”‚        1,753  â”‚   â”‚
â”‚  â”‚ search_images         â”‚    22 â”‚  34,567 â”‚        1,571  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  Why Pinned Servers Matter:                                     â”‚
â”‚  Pinned servers receive focused analysis in reports and         â”‚
â”‚  recommendations. Use this for your most important MCP tools.   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AVAILABLE SERVERS (not pinned)                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  mcp__github Â· mcp__filesystem Â· mcp__memory (12 more...)      â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [a] Add server  [Enter] Edit notes  [d] Remove  [q] Back       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Add Server Modal** (press `a`):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pin MCP Server                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Available Servers:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [1] â—‹ mcp__github         (45 calls this week)          â”‚   â”‚
â”‚  â”‚ [2] â—‹ mcp__filesystem     (23 calls this week)          â”‚   â”‚
â”‚  â”‚ [3] â—‹ mcp__memory         (12 calls this week)          â”‚   â”‚
â”‚  â”‚ [4] â—‹ mcp__postgres       (8 calls this week)           â”‚   â”‚
â”‚  â”‚     ... (use â†“ to see more)                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  Notes (optional):                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ________________________________________________        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Enter] Pin Selected  [Esc] Cancel                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Enhanced View: Dashboard

**Current** (v1.0.1):
- Today's summary (sessions, tokens, cost)
- Top smells (count only)
- Recent sessions (5)

**Enhanced** (v1.0.3):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard                                          token-audit  â”‚
â”‚ Last updated: Dec 26, 2025 at 2:34 PM                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€ TODAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€ THIS WEEK â”€â”€â”€â”€â”€â” â”Œâ”€ THIS MONTH â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Sessions:     5  â”‚ â”‚ Sessions:   32  â”‚ â”‚ Sessions:   127  â”‚ â”‚
â”‚  â”‚ Tokens:    125K  â”‚ â”‚ Tokens:    648K â”‚ â”‚ Tokens:    2.4M  â”‚ â”‚
â”‚  â”‚ Cost:     $8.50  â”‚ â”‚ Cost:    $45.23 â”‚ â”‚ Cost:   $168.90  â”‚ â”‚
â”‚  â”‚                  â”‚ â”‚ Avg/Day:  $6.46 â”‚ â”‚ Avg/Day:  $5.45  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  7-DAY COST TREND                        WEEK vs LAST WEEK      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚   $10 â”¤                                  Tokens: â–² +12%         â”‚
â”‚    $8 â”¤       â–ˆâ–ˆ                         Cost:   â–² +8%          â”‚
â”‚    $6 â”¤ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ                      Sessions: â–¼ -5%        â”‚
â”‚    $4 â”¤ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ                                          â”‚
â”‚    $2 â”¤ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ                MTD: $168.90           â”‚
â”‚     0 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 Budget: $200 (84%)     â”‚
â”‚        F  S  S  M  T  W  T                                      â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TOP SMELLS (by frequency)               TOP COST DRIVERS       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  HIGH_VARIANCE      38% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         mcp__jina       $18.50 â”‚
â”‚  CHATTY             25% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ            mcp__brave      $12.30 â”‚
â”‚  LOW_CACHE_HIT      16% â–ˆâ–ˆâ–ˆ              Read             $8.20 â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RECENT SESSIONS                                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  Time     â”‚ Project       â”‚ Tokens  â”‚   Cost â”‚ Tools â”‚ Smells  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  2:15 PM  â”‚ token-audit   â”‚  45,231 â”‚  $3.12 â”‚    12 â”‚       1 â”‚
â”‚  11:30 AM â”‚ token-audit   â”‚  28,456 â”‚  $1.98 â”‚     8 â”‚       0 â”‚
â”‚  10:23 AM â”‚ my-saas-app   â”‚  32,123 â”‚  $2.23 â”‚     6 â”‚       2 â”‚
â”‚  9:45 AM  â”‚ token-audit   â”‚  12,345 â”‚  $0.86 â”‚     4 â”‚       0 â”‚
â”‚  Yesterdayâ”‚ personal-blog â”‚   7,277 â”‚  $0.51 â”‚     3 â”‚       0 â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [n] New Session  [5] Analytics  [6] Smells  [Enter] Details    â”‚
â”‚ [2] Sessions     [4] Recommendations       [q] Quit            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**New Elements**:
1. **Summary Cards**: Today, Week, Month at a glance
2. **7-Day Sparkline**: Visual cost trend with labeled axes
3. **Week-over-Week Comparison**: Trend badges
4. **MTD + Budget**: Month progress indicator
5. **Smell Frequency Bars**: Visual percentage bars
6. **Top Cost Drivers**: Which tools cost most
7. **Enhanced Recent Sessions**: More columns, relative times

---

### Enhanced View: Recommendations

**Current** (v1.0.1): Static threshold checks

**Enhanced** (v1.0.3): Trend-aware, actionable insights
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Recommendations                                  Based on 7 daysâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âš ï¸  HIGH PRIORITY                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ˆ Usage Trending Up                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Your token usage increased 40% compared to last week.          â”‚
â”‚                                                                 â”‚
â”‚  This Week          Last Week           Change                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚  648K tokens        463K tokens         â–² +185K (+40%)          â”‚
â”‚  $45.23             $32.30              â–² +$12.93 (+40%)        â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’¡ Consider reviewing high-token sessions for optimization     â”‚
â”‚     opportunities or confirm this increase was intentional.     â”‚
â”‚                                                                 â”‚
â”‚  [View affected sessions â†’]                                     â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ”„ Recurring Pattern: HIGH_VARIANCE                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  This smell appears in 42% of your sessions, up 15% from        â”‚
â”‚  the previous period.                                           â”‚
â”‚                                                                 â”‚
â”‚  Affected Tools:                                                â”‚
â”‚  â€¢ mcp__jina__read_url (12 sessions)                           â”‚
â”‚  â€¢ mcp__brave__web_search (8 sessions)                         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’¡ Add result limits or pagination to these tools to reduce    â”‚
â”‚     token variance and improve cost predictability.             â”‚
â”‚                                                                 â”‚
â”‚  [View smell details â†’]                                         â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â„¹ï¸  INSIGHTS                                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’° Cost Concentration                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Your top 3 tools account for 68% of total token usage:         â”‚
â”‚                                                                 â”‚
â”‚  Tool                      â”‚ Tokens  â”‚   Cost â”‚ Share           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”€â”€â”€â”€â”€â”€  â”‚ â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€          â”‚
â”‚  mcp__jina__read_url       â”‚  234K   â”‚ $16.20 â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 36%    â”‚
â”‚  mcp__brave__web_search    â”‚  156K   â”‚ $10.80 â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 24%       â”‚
â”‚  Read                      â”‚   98K   â”‚  $6.78 â”‚ â–ˆâ–ˆâ–ˆ 15%         â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âœ… POSITIVE TRENDS                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  Cache efficiency improved: 34% â†’ 41% this week (+7%)           â”‚
â”‚  Average session duration decreased: 18min â†’ 12min (-33%)       â”‚
â”‚  BURST_PATTERN occurrences down 50%                             â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Enter] View details  [a] Export for AI  [q] Back              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Data Export (`e`/`j`/`a`)

**Available from any view**:

| Key | Format | Description |
|-----|--------|-------------|
| `e` | CSV | Tabular export for spreadsheets |
| `j` | JSON | Structured export for scripts |
| `a` | AI Prompt | Markdown with context for AI analysis |

**Export Modal**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Export Data                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Format: CSV                                                    â”‚
â”‚  View: Analytics (Daily, 7 days)                                â”‚
â”‚  Records: 7 rows                                                â”‚
â”‚                                                                 â”‚
â”‚  Destination:                                                   â”‚
â”‚  [1] â— Save to file: ~/token-audit-export-2025-12-26.csv       â”‚
â”‚  [2] â—‹ Copy to clipboard                                       â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Enter] Export  [Esc] Cancel                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Notification after export**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Exported to ~/token-audit-export-2025-12-26.csv (7 rows)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Date Range Filter (`r`)

**Purpose**: Filter all views by custom date range.

**Modal**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Date Range                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Quick Presets:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [1] Today           [5] Last 30 days                    â”‚   â”‚
â”‚  â”‚ [2] Yesterday       [6] Last 60 days                    â”‚   â”‚
â”‚  â”‚ [3] Last 7 days     [7] This month                      â”‚   â”‚
â”‚  â”‚ [4] Last 14 days    [8] Last month                      â”‚   â”‚
â”‚  â”‚                     [0] All time                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  Custom Range:                                                  â”‚
â”‚  From: [2025-12-01    ]  To: [2025-12-26    ]                  â”‚
â”‚                                                                 â”‚
â”‚  Current Filter: Last 7 days (Dec 20-26)                       â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Enter] Apply  [c] Clear filter  [Esc] Cancel                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Filter Badge** (shown in all views when active):
```
â”‚ Analytics                           [Dec 20-26] [d]aily [w]eeklyâ”‚
```

---

## Complete Keybinding Reference

### Global Keys (available everywhere)

| Key | Action |
|-----|--------|
| `1` | Dashboard |
| `2` | Sessions List |
| `3` | Live Monitor |
| `4` | Recommendations |
| `5` | Analytics |
| `6` | Smell Trends |
| `7` | Pinned Servers |
| `n` | Start new tracking session |
| `r` | Date range filter |
| `e` | Export CSV |
| `j` | Export JSON |
| `a` | Export for AI |
| `?` | Help |
| `q` | Quit / Back |
| `Ctrl+R` | Refresh data |

### View-Specific Keys

**Sessions List**:
| Key | Action |
|-----|--------|
| `Enter` | View session detail |
| `D` | Delete selected session |
| `p` | Pin/unpin session |
| `c` | Compare sessions |
| `f` | Filter by platform |
| `s` | Sort order |
| `Space` | Multi-select |

**Analytics**:
| Key | Action |
|-----|--------|
| `d` | Daily view |
| `w` | Weekly view |
| `m` | Monthly view |
| `g` | Group by project |
| `b` | Toggle model breakdown |
| `Enter` | Drill into period |

**Live Tracking**:
| Key | Action |
|-----|--------|
| `s` | Stop tracking |
| `p` | Pause/resume |
| `a` | Export for AI |

---

## Implementation Plan

### Phase 1: Core Views + Start Tracking (P0)

**Scope**: Analytics view, Dashboard enhancement, Start Tracking action

**Files to Create/Modify**:
- `src/token_audit/display/analytics_view.py` (new)
- `src/token_audit/display/dashboard.py` (enhance)
- `src/token_audit/display/session_browser.py` (integrate)
- `src/token_audit/display/modals.py` (new - reusable modal system)

**Steps**:
1. Create modal system for Start Tracking, confirmations
2. Implement Start Tracking flow with platform selection
3. Wire aggregation module to TUI
4. Build Analytics view with daily/weekly/monthly toggle
5. Enhance Dashboard with trend cards and sparklines
6. Register new keybindings

**Estimated Effort**: 4-5 days

---

### Phase 2: Smell Trends + Session Management (P1)

**Scope**: Smell Trends view, Delete Session action, Enhanced Recommendations

**Files to Create/Modify**:
- `src/token_audit/display/smell_trends_view.py` (new)
- `src/token_audit/display/recommendations.py` (enhance)
- `src/token_audit/display/session_browser.py` (add delete)

**Steps**:
1. Wire SmellAggregator to TUI
2. Build Smell Trends view with frequency table
3. Add Delete Session with confirmation
4. Enhance Recommendations with trend-based insights

**Estimated Effort**: 3-4 days

---

### Phase 3: Pinned Servers + Export (P1)

**Scope**: Pinned Servers view, Export functionality, Date Range filter

**Files to Create/Modify**:
- `src/token_audit/display/pinned_servers_view.py` (new)
- `src/token_audit/display/export.py` (new)
- `src/token_audit/display/date_filter.py` (new)

**Steps**:
1. Build Pinned Servers management view
2. Create export module (CSV, JSON, AI)
3. Create date range filter modal
4. Integrate across all views

**Estimated Effort**: 3-4 days

---

### Phase 4: Polish + Testing (P2)

**Scope**: Project grouping, visual polish, comprehensive tests

**Steps**:
1. Add project grouping to Analytics
2. Visual polish (colors, spacing, alignment)
3. Responsive layouts for narrow terminals
4. Unit and integration tests
5. Concurrency tests (TUI + MCP simultaneous)
6. Documentation updates

**Estimated Effort**: 2-3 days

---

## Concurrency Handling

### TUI + MCP Server Running Simultaneously

Users may have TUI open while an AI agent uses MCP. The TUI must handle this gracefully.

### Detection of External Changes

```python
class BrowserState:
    def __init__(self):
        self._file_mtimes: dict[Path, float] = {}

    def check_for_external_changes(self) -> list[str]:
        """Check if any watched files changed externally."""
        changed = []
        for path, mtime in self._file_mtimes.items():
            if path.exists():
                current = path.stat().st_mtime
                if current != mtime:
                    changed.append(path.name)
                    self._file_mtimes[path] = current
            else:
                changed.append(f"{path.name} (deleted)")
        return changed
```

### Refresh on Focus

When TUI regains focus or user presses `Ctrl+R`:
1. Check mtime of watched files
2. If changed, reload data
3. Show notification: "Data refreshed (external changes detected)"

### Handling Deleted Resources

If MCP deletes a session while TUI has it selected:
```python
try:
    session = storage.load_session(session_id)
except FileNotFoundError:
    self.show_notification("Session was deleted externally", style="warning")
    self.navigate_to_sessions_list()
```

### Write Operations

All TUI write operations use v1.0.2's shared helpers with file locking:
- Delete session â†’ `storage.delete_session()` (has locking)
- Pin server â†’ `preferences.add_pinned_server()` (has locking)
- Unpin server â†’ `preferences.remove_pinned_server()` (has locking)

### Notification Examples

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â„¹ï¸  External change detected: pinned-servers.json updated       â”‚
â”‚    Press Ctrl+R to refresh or changes will load automatically  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  Session abc-123 was deleted externally                      â”‚
â”‚    Returning to sessions list...                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary: Complete Self-Contained Workflow

After v1.0.3, a user can do everything from `token-audit ui`:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     COMPLETE TUI WORKFLOW                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. START SESSION                                               â”‚
â”‚     Press 'n' â†’ Select platform â†’ Start tracking                â”‚
â”‚                            â†“                                    â”‚
â”‚  2. WORK (in another terminal with your AI tool)                â”‚
â”‚     Live view shows real-time metrics                           â”‚
â”‚                            â†“                                    â”‚
â”‚  3. STOP & REVIEW                                               â”‚
â”‚     Press 's' â†’ See session summary                             â”‚
â”‚                            â†“                                    â”‚
â”‚  4. ANALYZE TRENDS                                              â”‚
â”‚     '5' Analytics â†’ Daily/weekly/monthly views                  â”‚
â”‚     '6' Smell Trends â†’ Frequency analysis                       â”‚
â”‚                            â†“                                    â”‚
â”‚  5. ACT ON INSIGHTS                                             â”‚
â”‚     '4' Recommendations â†’ Trend-based suggestions               â”‚
â”‚     '7' Pinned Servers â†’ Focus analysis on key tools            â”‚
â”‚                            â†“                                    â”‚
â”‚  6. EXPORT & SHARE                                              â”‚
â”‚     'e' CSV â†’ Spreadsheet export                                â”‚
â”‚     'j' JSON â†’ Script/API consumption                           â”‚
â”‚     'a' AI â†’ Analysis prompt for AI assistant                   â”‚
â”‚                            â†“                                    â”‚
â”‚  7. CLEANUP                                                     â”‚
â”‚     '2' Sessions â†’ 'D' Delete old sessions                      â”‚
â”‚                                                                 â”‚
â”‚  âœ“ Never need to exit to CLI for daily workflows               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Success Criteria

1. **Self-contained**: All daily tasks possible without CLI
2. **Readable**: All views follow table/section standards
3. **Scannable**: Key metrics visible within 2 seconds
4. **Consistent**: Same keybindings and patterns across views
5. **Fast**: All views render in <200ms
6. **Exportable**: Any view can export CSV/JSON/AI

---

## Timeline Summary

| Phase | Scope | Days |
|-------|-------|------|
| Phase 1 | Analytics + Dashboard + Start Tracking | 4-5 |
| Phase 2 | Smell Trends + Delete + Recommendations | 3-4 |
| Phase 3 | Pinned Servers + Export + Date Filter | 3-4 |
| Phase 4 | Project Grouping + Polish + Tests | 2-3 |
| **Total** | | **12-16 days** |

---

**Last Updated**: December 26, 2025
