# Getting Started with Token Audit

Get up and running in 5 minutes. This guide walks you through installation, your first session, and understanding the TUI dashboard.

---

## Prerequisites

Before you begin, ensure you have:

- **Python 3.8+** installed (`python3 --version`)
- At least one supported CLI platform:
  - [Claude Code](https://claude.ai/claude-code) (Anthropic)
  - [Codex CLI](https://github.com/openai/codex) (OpenAI)
  - [Gemini CLI](https://github.com/google-gemini/gemini-cli) (Google)

---

## Installation

### Option 1: pipx (Recommended)

```bash
pipx install token-audit
```

pipx provides isolated installation, preventing dependency conflicts.

### Option 2: pip

```bash
pip install token-audit
```

### Option 3: uv

```bash
uv pip install token-audit
```

### Verify Installation

```bash
token-audit --version
```

---

## Your First Session

Follow these 5 steps to track your first AI coding session.

### Step 1: Open Two Terminals

You'll need two terminal windows:
- **Terminal A**: Run Token Audit (the tracker)
- **Terminal B**: Run your AI coding agent (Claude Code, Codex CLI, or Gemini CLI)

### Step 2: Start Token Audit

In Terminal A, navigate to your project directory and start tracking:

```bash
cd /path/to/your/project
token-audit collect --platform claude-code
```

Replace `claude-code` with `codex-cli` or `gemini-cli` if using those platforms.

You'll see the TUI dashboard appear:

```
Token Audit v1.0.0 - Claude Code Session
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Status: Waiting for events...
Project: your-project (auto-detected)
```

### Step 3: Start Your AI Agent

In Terminal B, start your normal AI coding session:

```bash
# Claude Code
claude

# Codex CLI
codex

# Gemini CLI
gemini
```

### Step 4: Work Normally

Use your AI agent as you normally would. In Terminal A, watch the TUI update in real-time as you work:

```
Token Usage
──────────────────────────────────────
Input:       45,231    Output:    12,345
Cached:     125,000    Total:    182,576
Token Rate: 15.2K/min  Call Rate: 3.2/min

MCP Servers (4 servers, 12 tools, 47 calls)
──────────────────────────────────────
  zen ............. 28 calls, 234K tokens
  brave-search .... 14 calls, 89K tokens
  backlog ......... 5 calls, 12K tokens

Cost: $0.42 (Estimated)
Cache Efficiency: 68.4%
```

### Step 5: Stop Tracking

When finished, press `Ctrl+C` in Terminal A to stop tracking. Your session is automatically saved.

```
Session Complete
─────────────────
Duration: 45m 12s
Saved to: ~/.token-audit/sessions/claude_code/2025-01-15/session-abc123.json
```

---

## Generate Your First Report

After a session, view where your tokens went:

```bash
token-audit report ~/.token-audit/sessions/ --top-n 5
```

Output:

```markdown
# Token Audit Report

## Summary
- Sessions: 1
- Total Tokens: 182,576
- Estimated Cost: $0.42

## Top Tools by Token Usage
| Tool | Calls | Tokens | % Total |
|------|-------|--------|---------|
| mcp__zen__thinkdeep | 8 | 156,000 | 85.4% |
| mcp__brave-search__web | 14 | 15,000 | 8.2% |
| mcp__backlog__task_view | 5 | 8,000 | 4.4% |
```

---

## Understanding the TUI Dashboard

The TUI (Terminal User Interface) shows real-time session metrics.

### Token Usage Panel

```
Token Usage
──────────────────────────────────────
Input:       45,231    Output:    12,345
Cached:     125,000    Total:    182,576
Token Rate: 15.2K/min  Call Rate: 3.2/min
```

| Metric | Description |
|--------|-------------|
| **Input** | Tokens sent to the model (prompts, context) |
| **Output** | Tokens generated by the model (responses) |
| **Cached** | Tokens served from cache (cheaper) |
| **Total** | Sum of all token usage |
| **Token Rate** | Tokens consumed per minute |
| **Call Rate** | Tool calls per minute |

### MCP Servers Panel

```
MCP Servers (4 servers, 12 tools, 47 calls)
──────────────────────────────────────
  zen ............. 28 calls, 234K tokens
  brave-search .... 14 calls, 89K tokens
```

Shows which MCP servers are consuming tokens, with per-server breakdown.

### Cost Panel

```
Cost: $0.42 (Estimated)
Cache Efficiency: 68.4%
Cache Hit: 72.1%
```

| Metric | Description |
|--------|-------------|
| **Cost** | Estimated session cost based on model pricing |
| **Cache Efficiency** | Cost savings from caching (money saved) |
| **Cache Hit** | Percentage of input tokens from cache |

---

## Gemini CLI: Install Tokenizer

For 100% accurate token counts with Gemini CLI, download the Gemma tokenizer:

```bash
token-audit tokenizer download
```

Without it, Token Audit uses tiktoken (~95% accuracy) and displays an "Estimated" badge.

---

## What's Next?

Now that you have your first session tracked, explore these guides:

### Platform-Specific Setup
- [Claude Code Guide](platforms/claude-code.md) — Native token tracking
- [Codex CLI Guide](platforms/codex-cli.md) — OpenAI integration
- [Gemini CLI Guide](platforms/gemini-cli.md) — Google AI integration

### Feature Deep-Dives
- [Feature Reference](features.md) — TUI panels, smell detection, exports
- [Configuration Reference](configuration.md) — Themes, pricing, CLI options

### Troubleshooting
- [Troubleshooting Guide](troubleshooting.md) — Common issues and solutions
- [FAQ](faq.md) — Frequently asked questions

### Usage Examples
- [Debugging a Slow Session](examples/debugging-slow-session.md)
- [Optimizing MCP Config](examples/optimizing-mcp-config.md)
- [All Examples...](examples/)

---

## Quick Reference

### Common Commands

```bash
# Track a session
token-audit collect --platform claude-code

# Generate report
token-audit report ~/.token-audit/sessions/

# Browse past sessions
token-audit ui

# Export for AI analysis
token-audit report --format ai

# Check tokenizer status
token-audit tokenizer status
```

### Keyboard Shortcuts (TUI)

| Key | Action |
|-----|--------|
| `Ctrl+C` | Stop tracking and save session |
| `r` | Refresh display |
| `q` | Quit |

### Session Storage

Sessions are saved to: `~/.token-audit/sessions/<platform>/<date>/`

---

*Need help? See [Troubleshooting](troubleshooting.md) or ask in [GitHub Discussions](https://github.com/littlebearapps/token-audit/discussions).*
